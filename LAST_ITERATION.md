- **Refactor (JS):** Extracted over 650 lines of visual effect logic from `main.js` into a new, dedicated module, `static/js/visuals.js`. This new module is solely responsible for translating game events into visual effect data structures.
- **Best Practice (JS):** The `main.js` file now acts as a cleaner controller, orchestrating calls between the API, the renderer, and the new `visuals.js` module. This significantly improves separation of concerns and readability.
- **Refactor (JS):** Simplified the `updateStateAndRender` function in `main.js` by delegating all visual effect processing to the `visualEffectsManager`.
- **Fix (JS):** Corrected a minor bug where visual effect functions were referencing a global `currentGameState` instead of the `gameState` passed to them. The new `visuals.js` module correctly uses the passed game state, ensuring data consistency.