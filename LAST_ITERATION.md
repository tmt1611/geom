- **Refactor (JS):** Removed over 1100 lines of duplicated drawing code from `main.js`. All canvas rendering logic, including functions like `drawPoints`, `drawLines`, and structure-specific drawers, is now exclusively handled by `renderer.js`.
- **Refactor (JS):** Removed dead code, including the `fullRender` function and a duplicate `animationLoop` definition from `main.js`, simplifying the file into a pure controller.
- **Feature (JS):** Implemented a visual effects drawing system in `renderer.js`. The new `drawVisualEffects` function renders temporary animations (like explosions, rays, pulses) based on data in `uiState.visualEffects`.
- **Best Practice (JS):** `main.js` is now responsible for processing game events and populating the `uiState.visualEffects` array, while `renderer.js` is responsible for consuming this data and drawing to the canvas. This enforces a clear separation of concerns between the controller and the view.
- **Fix (JS):** The main animation loop in `main.js` now correctly and solely calls `renderer.render()` to draw the game state, fixing an issue where rendering logic was duplicated and partially unused.